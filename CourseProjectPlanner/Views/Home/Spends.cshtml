@{
	ViewData["Title"] = "Витрати";
}

@model IEnumerable<CourseProjectPlanner.Models.Spend>

@{
	ViewData["Title"] = "Index";
	List<Category> categoriesList = ViewBag.CategoryNames;
	List<User> usersList = ViewBag.UserLogins;
}



<link rel="stylesheet" href="~/css/item.css" asp-append-version="true" />

@{
	int counter = 0;
}

@{
	foreach (var item in Model)
	{
		int userId = Int32.Parse(ViewBag.UserId);
		string categoryImage = "/images/";
        string categoryName = "";
        decimal spendPrice;
        string spendDate;
		if(categoriesList.Any(c => c.CategoryId == item.CategoryId))
		{
			categoryImage = categoryImage + categoriesList.First(c => c.CategoryId == item.CategoryId).ImageName;
			categoryName = categoriesList.First(c => c.CategoryId == item.CategoryId).Name;
		}

		spendPrice = item.Price;
		spendDate = item.SpendDate.ToString("MM/dd/yyyy");

		if (counter % 4 == 0)
		{
			@:<div class="d-flex center-element" style="max-width: 70%">
		}
		if(item.UserId == userId) // замість 6 взяти індекс з cookies UserId
		{
		<div class="card col-md-3 col-10 mt-5">
			<img class='mx-auto img-thumbnail'
				 src=@categoryImage
				 width="100px" />
			<div class="card-body text-center mx-auto">
				<div class='cvp'>
					<h5 class="card-title font-weight-bold">@categoryName</h5>
					<p class="card-text">₴@spendPrice</p>
					<p>@spendDate</p>
					<a href="#" class="btn details px-auto">Деталі</a><br />
				</div>
			</div>
		</div>
		counter++;
		}
		if (counter % 4 == 0)
		{
			@:</div>
		}
	}
	
	@:</div>

}

<script>
	let cookie = getCookie("UserId");
</script>


